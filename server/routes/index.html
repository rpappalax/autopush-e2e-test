<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Push Notification Test</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="manifest" href="manifest.json">
    <script src='main.js'></script>

</head>
<body onload="checkEnv()">
    <div class="container">
        <p>Supports Fx44, Chrome 44, Android Chrome 44 - <a href='https://github.com/edmoz/push-notification-test'>github src</a><br/>
        Note: Chrome doesn't support Data in 44 so dynamic text and url isn't support in notification</p>
        <hr />

    <section>
      <h2>Notifications Properties</h2>
      <table class="table">
      <tbody>
      <tr>
        <th><label for="msg_txt">Title:</label></th>
        <td><input id="msg_txt" value="Hi There" size="60"/></td>
      </tr>
      <tr>
        <th><label for="body_txt">Body:</label></th>
        <td><input id="body_txt" value="body text here" size="60"/></td>
      </tr>
      <tr>
        <th><label for="tag_txt">Tag: (if same will replace vs add)</label></th>
        <td><input id="tag_txt" value="" size="60"/></td>
      </tr>
      <tr>
        <th><label for="icon_txt">Icon:</label></th>
        <td><input id="icon_txt" value="icon.png" size="60"/></td>
      </tr>
      <tr>
        <th><label for="url_txt">URL:</label></th>
        <td><input id="url_txt" value='http://www.mozilla.org?foo=bar' size="60"/></td>
      </tr>
      <tr>
        <th><label for="target_txt">Target:</label></th>
        <td><input id="target_txt" value="_blank" size="60"/></td>
      </tr>
      <tr>
        <th><label for="ttl_txt">TTL - seconds to deliver msg: </label></th>
        <td><input id="ttl_txt" value="60" size="60"/></td>
      </tr>
      <tr>
        <th><label for="ri_cb">requireInteraction: (chrome only)</label></th>
        <td>
          <select id='ri_cb'>
            <option value="default" selected>default</option>
            <option value="true">true</option>
            <option value="false">false</option>
          </select>
        </td>
      </tr>
      </tbody>
      </table>
    </section>
        <h2>Notifications API</h2>
        <!-- <button onclick='checkNotifyProperites()'>Check Notification</button> -->
        <p>
        <button onclick='notifyMe()'>pop Notification</button>
        </p>
        <p>
        <button onclick='closeNotification()'>closeNotification</button>
        </p>
        <hr />
        <h2>Push API</h2>
        <select  id='sw_txt'>
          <option value="service-worker.js" selected>service-worker.js</option>
          <option value="silent.js">push msg - no notifications</option>
          <option value="sw-focus.js">sw-focus.js</option>
          <option value="sw-focus-bug.js">sw-focus-bug.js</option>
        </select>
        <button onclick='regSW()' id='reg_btn'>register Service Worker</button> 
<!--         <button onclick='checkSW(registration)'>Check Service Worker</button>  -->
        <button onclick='unregSW()' id='unreg_btn' style="visibility:hidden">Unregister Service Worker</button>
        <p></p>
        <button onclick='subscribe()' id="subscribe_btn" style="visibility:hidden">subscribe to push</button>
        <div id='xhr_msg' style="visibility:hidden">
            Repeat: <input id='repeat_txt' value='1'></input><br />
            Delay (seconds): <input id='delay_txt' value='8'></input><br />
            Flood Delay (seconds): <input id='floodDelay_txt' value='0'></input> Wait, then flood client (overrides 'delay')<br />
            <button id='doXhr_btn' onclick='doXhr()'>XHR to webpush app-server</button> 
            <button id='mailto_btn' onclick='sendMail()' style="visibility:hidden">mailto:CURL string</button>
            <hr />
        </div>


        <div id='sw_div' style="visibility:hidden">
        Service Worker
        <p></p>
        Send a string from page to service worker (see log below):<input id='echo_txt' value='HelloWorld'></input><button onclick="sendMsgToSW('nada')" id="sendMsgToSW_btn" >Send postMessage</button><br />
        <button onclick="sendMsgToSW('pop')" id="sendMsgToSW_btn" >Pop Notification via SW postMessage</button>
        <hr />
        </div>
        <div id='demo'></div>
    <div>
</body>
</html>


